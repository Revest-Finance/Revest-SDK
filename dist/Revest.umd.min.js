/*!
 * revest-sdk-core
 * Revest
 *
 * @version v1.0.0
 * @author Revest Team
 * @homepage https://github.com/Revest-Finance/Revest-SDK#readme
 * @repository git+https://github.com/Revest-Finance/Revest-SDK.git
 * @license MIT
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Revest=t()}(this,(function(){"use strict";function e(e,t,n,a,s,i,r){try{var o=e[i](r),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(a,s)}function t(t){return function(){var n=this,a=arguments;return new Promise((function(s,i){var r=t.apply(n,a);function o(t){e(r,s,i,o,u,"next",t)}function u(t){e(r,s,i,o,u,"throw",t)}o(void 0)}))}}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){n(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}const i={1:"https://api.thegraph.com/subgraphs/name/alexvorobiov/eip1155subgraph"},r={1:{MIN_BLOCK:9005417,ROUTER:"0xD721A90dd7e010c8C5E022cc0100c55aC78E0FC4",PROVIDER:"https://eth-mainnet.alchemyapi.io/v2/zOVFUzSEld1v_MuTOqGPYkTYttwBUrmF",UNISWAP:"0x5C69bEe701ef814a2B6a3EDD4B1652CB9cc5aA6f",NFT_LOCKER:"0x2ddb4cD64B99761368074ca1eaa61f2F42C77513",ETHERSCAN_API:"https://api.etherscan.io",MULTICALL:"0xeefba1e63905ef1d7acba5a8513c70307c1ce441"},4:{MIN_BLOCK:9005417,ROUTER:"0x21744C9A65608645E1b39a4596C39848078C2865",PROVIDER:"https://eth-rinkeby.alchemyapi.io/v2/srVBZIhy3PWWN1URQfd-KlTJk8q964kr",UNISWAP:"0x5C69bEe701ef814a2B6a3EDD4B1652CB9cc5aA6f",NFT_LOCKER:"0xfAfce8012a3Cf1825e2FD4D9B4D0cf67e9299bc5",ETHERSCAN_API:"https://api-rinkeby.etherscan.io",MULTICALL:"0x42ad527de7d4e9d9d011ac45b31d8551f8fe9821"},137:{MIN_BLOCK:21525737,ROUTER:"0xC03bB46b3BFD42e6a2bf20aD6Fa660e4Bd3736F8",PROVIDER:"https://polygon-mainnet.g.alchemy.com/v2/XZF2U-6qLByJKH9OVsB8rflwSYaZRQaq",UNISWAP:"0x5757371414417b8C6CAad45bAeF941aBc7d3Ab32",NFT_LOCKER:"0x450c634Db9f1a8411FAAeB13607b67446c87205B",ETHERSCAN_API:"https://api.polygonscan.com",MULTICALL:"0xCBca837161be50EfA5925bB9Cc77406468e76751"},250:{MIN_BLOCK:22917309,ROUTER:"0xe0741aE6a8A6D87A68B7b36973d8740704Fd62B9",PROVIDER:"https://rpc.ftm.tools",UNISWAP:"0x152eE697f2E276fA89E96742e9bB9aB1F2E61bE3",NFT_LOCKER:"0x8f04aDd37E7Bca814ea5D09518E4eb830ccEE474",ETHERSCAN_API:"https://api.FtmScan.com",MULTICALL:"0x7f6A10218264a22B4309F3896745687E712962a0"},43114:{MIN_BLOCK:7469820,ROUTER:"0x64e12fEA089e52A06A7A76028C809159ba4c1b1a",PROVIDER:"https://api.avax.network/ext/bc/C/rpc",UNISWAP:"0xefa94DE7a4656D787667C749f7E1223D71E9FD88",ETHERSCAN_API:"https://api.snowtrace.io",MULTICALL:"0x7E9985aE4C8248fdB07607648406a48C76e9e7eD"}},o=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"ADMIN",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"ESCROW",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"FNFT",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"LIQUIDITY_TOKENS",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"LOCK_MANAGER",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"METADATA",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"REVEST",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"REVEST_TOKEN",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"TOKEN_VAULT",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"_addresses",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"_dex",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"id",type:"bytes32"}],name:"getAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAdmin",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"getDEX",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getLPs",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getLockManager",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getMetadataHandler",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getRevest",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getRevestFNFT",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getRevestToken",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getRewardsHandler",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTokenVault",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"lock_manager_",type:"address"},{internalType:"address",name:"liquidity_",type:"address"},{internalType:"address",name:"revest_token_",type:"address"},{internalType:"address",name:"token_vault_",type:"address"},{internalType:"address",name:"revest_",type:"address"},{internalType:"address",name:"fnft_",type:"address"},{internalType:"address",name:"metadata_",type:"address"},{internalType:"address",name:"admin_",type:"address"},{internalType:"address",name:"rewards_",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"next_dex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"admin",type:"address"}],name:"setAdmin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"dex",type:"address"}],name:"setDex",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"liquidToken",type:"address"}],name:"setLPs",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"manager",type:"address"}],name:"setLockManager",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"metadata",type:"address"}],name:"setMetadataHandler",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"revest",type:"address"}],name:"setRevest",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"fnft",type:"address"}],name:"setRevestFNFT",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"setRevestToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"esc",type:"address"}],name:"setRewardsHandler",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"vault",type:"address"}],name:"setTokenVault",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}];var u=function(e){this.value=e},p=Object.defineProperty({EnumType:u},"__esModule",{value:!0}),y=function(){function e(e){this.value=e}return e.prototype.toJSON=function(){return"$"+this.value},e}(),d=Object.defineProperty({VariableType:y},"__esModule",{value:!0}),c=function(e){var t={exports:{}};return e(t,t.exports),t.exports}((function(e,t){function n(e){return e instanceof p.EnumType?e.value:e instanceof d.VariableType?"$"+e.value:"object"!=typeof e||null===e?JSON.stringify(e):Array.isArray(e)?"["+e.map((function(e){return n(e)})).join(", ")+"]":"{"+Object.keys(e).map((function(t){return t+": "+n(e[t])})).join(", ")+"}"}function a(e,n){return-1==t.configFields.indexOf(e)&&-1==n.indexOf(e)}function s(e,t,i,r){Object.keys(e).filter((function(e){return a(e,r.ignoreFields)})).forEach((function(o){var u=e[o];if("object"==typeof u){if(Array.isArray(u)&&!(u=u.find((function(e){return e&&"object"==typeof e}))))return void i.push([""+o,t]);var p=Object.keys(u).filter((function(e){return a(e,r.ignoreFields)})).length>0,y="object"==typeof u.__args&&Object.keys(u.__args).length>0,d="object"==typeof u.__directives,c=u.__all_on instanceof Array,l="object"==typeof u.__on,f=""+o;if("string"==typeof u.__name&&(f=f+" "+u.__name),"string"==typeof u.__aliasFor&&(f=f+": "+u.__aliasFor),"object"==typeof u.__variables)f=f+" ("+function(e){var t=[];for(var n in e)t.push("$"+n+": "+e[n]);return t.join(", ")}(u.__variables)+")";else if(y||d){var b="",m="";d&&(m=Object.entries(u.__directives).map((function(e){var t;return"@"+function(e){var t=Object.keys(e)[0],a=e[t];if("boolean"==typeof a)return t;if("object"==typeof a){var s=[];for(var i in a){var r=n(a[i]).replace(/"/g,"");s.push(i+": "+r)}return t+"("+s.join(", ")+")"}throw new Error("Unsupported type for directive: "+typeof a+". Types allowed: object, boolean.\nOffending object: "+JSON.stringify(e))}(((t={})[e[0]]=e[1],t))})).join(" ")),y&&(b="("+function(e){var t=[];for(var a in e)t.push(a+": "+n(e[a]));return t.join(", ")}(u.__args)+")"),f=f+" "+m+(d&&y?" ":"")+b}if(i.push([f+(p||l||c?" {":""),t]),s(u,t+1,i,r),c&&u.__all_on.forEach((function(e){i.push(["..."+e,t+1])})),l)(u.__on instanceof Array?u.__on:[u.__on]).forEach((function(e){var n=e.__typeName;i.push(["... on "+n+" {",t+1]),s(e,t+2,i,r),i.push(["}",t+1])}));(p||l||c)&&i.push(["}",t])}else(!0===r.includeFalsyKeys||u)&&i.push([""+o,t])}))}Object.defineProperty(t,"__esModule",{value:!0}),t.configFields=["__args","__alias","__aliasFor","__variables","__directives","__on","__all_on","__typeName","__name"],t.jsonToGraphQLQuery=function(e,t){if(void 0===t&&(t={}),!e||"object"!=typeof e)throw new Error("query object not specified");if(0==Object.keys(e).length)throw new Error("query object has no data");t.ignoreFields instanceof Array||(t.ignoreFields=[]);var n=[];s(e,0,n,t);var a="";return n.forEach((function(e){var n=e[0],s=e[1];t.pretty?(a&&(a+="\n"),a+=function(e){return Array(4*e+1).join(" ")}(s)+n):(a&&(a+=" "),a+=n)})),a}}));let l=(f=t((function*(e,t,n={}){const a=yield fetch(e,{method:"POST",headers:s({Accept:"application/json","Content-Type":"application/json"},n?.headers),body:JSON.stringify({query:c.jsonToGraphQLQuery({query:t})})}),{data:i}=yield a.json();return i||{}})),function(e,t){return f.apply(this,arguments)});var f;return class{constructor(e,a){var s,u=this;n(this,"renderAllFNFTs",(()=>{var e=t((function*(e){return u.lazyLoad(),e.reduce((function(e,t){return e.then((function(e){return fetch(t.url).then((function(e){return e.json()})).then((function(n){return fetch(n.animation_url).then((function(e){return e.text()})).then((function(n){const a=document.createElement("div"),s=document.createElement("embed"),i=new Blob([n],{type:"text/html"});return a.className="card",s.frameborder=0,s.className="lazyload",s.width="300",s.height="460",s.style.width="300",s.id="fnft_"+t.id,s.style.height="460",s.wmode="transparent",s.dataset.src=window.URL.createObjectURL(i),a.appendChild(s),document.getElementById(u._divId).appendChild(a),u.observer.observe(a),Promise.resolve(e+1)}))}))}))}),Promise.resolve(1))}));return function(t){return e.apply(this,arguments)}})()),n(this,"lazyLoad",t((function*(){u.observer=new IntersectionObserver((function(e){e.filter((function(e){return e.isIntersecting})).forEach((function(e){e.target.childNodes[0].src||(e.target.childNodes[0].setAttribute("src",e.target.childNodes[0].dataset.src),e.target.childNodes[0].style.zIndex=999)}))}),{root:null,threshold:new Array(101).fill(0).map((function(e,t){return.01*t}))})}))),n(this,"getAllFNFTsForUser",(s=t((function*(e,t){let n=(yield t.getNetwork()).chainId;const a=[e],s=new ethers.Contract(r[n].ROUTER,o,t),u=yield s.getRevestFNFT();let p=[];const y={accounts:{__args:{where:{id_in:a.map((function(e){return e.toLowerCase()}))}},id:!0,balances:{value:!0,token:{registry:{id:!0},identifier:!0}}}};return(yield l(i[n],y)).accounts[0].balances.forEach((function(e){e.token.registry.id.toLowerCase()===u.toLowerCase()&&"0"!=e.value&&p.push(Number(e.token.identifier))})),yield(yield fetch("http://localhost:3000/metadata?id="+p.sort().join(","))).json()})),function(e,t){return s.apply(this,arguments)})),this._ethers=e,this._divId=a,this.observer}}}));
